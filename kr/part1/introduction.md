들어가며
============

Axon은 규모 가변성과 확장성에 대한 문제를 아키텍처적으로 직접 해결하여 규모 가변적이고 확장 가능한 애플리케이션을 구축을 도와주는 가벼운 프레임워크입니다. 이 문서는 Axon이 무엇인지와 어떻게 사용하는지 그리고 Axon이 어떻게 개발을 도와줄 수 있는지 설명할 것입니다.

Axon 그리고 Axon을 개발하게 된 이야기를 알고 싶으시다면, Axon Framework Background](part1/introduction.md#axon-framework-background)를 읽어 보면 됩니다. 지금 당장 Axon을 사용해서 자신만의 애플리케이션을 만들어 보고 싶다면, [시작하기](./introduction.md#시작하기)를 바로 읽어 보면 됩니다. Axon Framework를 만들어 가는 데 도움을 주고 싶다면, [기여하기](./introduction.md#axon-framework에-기여하기)에서 필요한 정보를 얻을 수 있을 겁니다. 마지막으로 몇 가지 법적인 문제들에 대해서는 [라이선스](./introduction.md#라이선스-정보) 부분에서 다루게 됩니다.

Axon Framework을 개발하게 된 이야기
=========================

Axon Framework의 간략한 역사
---------------

시간이 흐르면서, 소프트웨어 프로젝트에 대한 요구는 빠르게 증가하였습니다. 회사들은 그들의 사업의 성장과 함께 (웹 기반의) 애플리케이션 또한 발전 시켜 나가길 원합니다. 이것이 의미하는 바는, 프로젝트와 코드 베이스들만 복잡해지는 것이 아니라 애플리케이션의 기능 또한 끊임없이 추가되고 수정되며 삭제됩니다. 겉으로 보기에 구현하기 쉬운 기능을 개발하는데 개발팀이 전체 애플리케이션을 분해해야 한다면 이는 짜증이 나는 상황이 될 수 있습니다. 또한, 오늘날의 웹 기반의 애플리케이션들은 수백만의 잠재적인 고객들을 대상으로 하므로 애플리케이션을 규모 가변적으로 만드는 것은 필요한 사항입니다.

규모 가변적인 이슈들을 해결해 주는 GigaSpaces 그리고 Terra-cotta와 같은 애플리케이션들과 프레임워크는 이미 많이 있습니다. 하지만 그들은 한가지 근본적인 결함을 공통적으로 가지고 있습니다. 이 기술들은 그들이 예전부터 사용해 왔던 계층 구조의 아키텍처를 사용한 애플리케이션을 개발자들에게 개발하도록 하여 규모 가변성의 문제를 해결하려고 한다는 것입니다. 몇몇 경우에, 그들은 모든 도메인 로직을 서비스 객체들에 넣으라고 강요하면서, 실제 도메인 모델의 사용을 엄격하게 제한하거나 심지어 막기도 합니다. 비록 그런 방법이 애플리케이션을 만드는 빠른 시작점 될 수 있다 하더라도, 결국에는 복잡성을 증가시키고 개발 자체를 느리게 만들어 버리게 됩니다.

명령과 조회의 책임 분리(Command Query Responsibility Segregation, 줄여서 CQRS) 패턴은 애플리케이션을 설계하는 방식 자체를 바꾸어 위에서 언급되었던 문제들을 해결합니다. 로직을 별도의 계층으로 분리하는 대신, 로직을 애플리케이션의 상태를 조회하거나 변경하는지에 따라서 분리합니다. 다시 말하면, 명령(command)-잠재적으로 애플리케이션의 상태를 변경시킬 수 있는 행동(action)-들은 애플리케이션의 상태를 조회하는 컴포넌트(component)와는 다른 컴포넌트에서 실행이 됩니다. 이렇게 명령과 조회를 분리하는 가장 큰 이유는 명령과 조회 각각에 대한 기술적 및 비기술적인 요구사항들이 존재하기 때문입니다. 명령들이 실행될 때, 조회 컴포넌트는 이벤트를 사용하여 (비)동기적으로 갱신이 됩니다. 이렇게 이벤트를 통해 갱신하는 구조는 애플리케이션의 아키텍처를 확장성 있고, 규모 가변적이며 궁극적으로 유지 보수성을 더욱 더 높여 줍니다.

> **노트**

> CQRS에 대한 상세 설명은 이 문서의 범위를 벗어 나기 떼문에, CQRS에 대해 보다 많은 내용을 알고 싶다면 Axon Framework의 웹 싸이트 [www.axonframework.org](www.axonframework.org)를 방문하여 주세요. 해당 웹 싸이트에 CQRS에 대한 정보를 얻을 수 있는 링크들이 있습니다.

CQRS는 오늘날의 소프트웨어 환경을 지배하는 계층화 된 아키텍처와는 근본적으로 다릅니다. 개발자들이 자신들의 애플리케이션에 적용할 이 아키텍처를 둘러보면서 몇 가지 함정에 빠지는 것은 흔한 일입니다. 이것이 Axon Framework를 개발하게 된 이유이며, Axon Framework를 통해 개발자들이 비즈니스 로직에 중점을 두면서 CQRS 응용 프로그램을 구현할 수 있도록 도와줄 것입니다.

Axon Framework는 어떤 프레임워크 인가?
-------------

Axon Framework는 CQRS 아키텍처 패턴을 개발자가 적용할 수 있도록 지원하여 규모 가변적이고 확장성이 있으며 유지 보수가 가능한 애플리케이션을 구축할 수 있도록 도와줍니다. Axon Framework는 aggregate, repository 그리고 이벤트 버스 (이벤트를 전파하는 구조) 등과 같은 핵심이 되는 빌딩 블록(building block)들의 구현체를 제공합니다. 또한, Axon의 특정 로직에 묶여야 하는 코드 작성 없이, aggregate들과 이벤트 리스너를 개발할 수 있는 에노테이션(annotation)들을 제공합니다. 따라서 개발자는 비지니스 로직에 보다 초점을 맞춰서 개발할 수 있고, 독립된 환경에서 테스트를 쉽게 수행할 수 있습니다.

Axon은 CQRS 아키텍처 혹은 관련 컴포넌트들을 숨기려 하지 않습니다. 따라서 CQRS에 대하 세세히 알고 있는 개발자가 팀 안에 한 명 혹은 그 이상 있는 것이 좋습니다. Axon을 사용하면, 올바른 이벤트 리스너에게 이벤트를 전달하고, 전달된 이벤트들을 정확한 순서로 동시에 처리할 수 있습니다. 다중 스레드와 관련된 고려 사항들은 일반적으로 다루기 어렵고 버그가 발생해도 추적하기 어렵습니다. 심지어 때때로 애플리케이션의 오작동을 일으킬 수 있습니다.  그렇지만 Axon framework 내의 코드들은 다중 스레드와 관련된 유형의 버그들이 발생하지 않도록 꼼꼼히 검증 되어 있습니다.

Axon Framework는 다수의 모듈(jar)로 구성이 되어 있습니다. 각 모듈은 규모 가변적 기반을 구축하기 위한 컴포넌트들과 도구들을 제공합니다. Axon Core 모듈은 각기 다른 컴포넌트들을 위한 기본적인 API들과 단일 JVM을 사용하는 애플리케이션에 적합한 솔루션을 제공하는 간단한 구현체들을 제공합니다. 다른 모듈들은 규모 가변성과 고성능 관련 이슈들을 다루기 위해 특화된 빌딩 블록들을 제공합니다.


언제 Axon을 사용해야 할까?
-----------------

모든 애플리케이션 개발에 Axon이 적합한 것은 아닙니다. 단순히 생성, 조회, 수정 및 삭제 기능(CRUD*)이 주를 이루며 규모를 가변적으로 늘리거나 줄이지 않는 애플리케이션을 개발할 때는 CQRS 혹은 Axon을 사용하여 얻는 이득이 없습니다. 그렇지만 다양한 범위의 애플리케이션들 개발에 Axon을 사용할 수 있습니다.

> 참고
>
> CRUD는 특정 데이터에 대한 생성(Create), 조회(Read), 수정(Update) 그리고 삭제(Delete) 작업의 줄임말 입니다.

CQRS와 Axon을 사용하기 좋은 애플리케이션들은 다음의 특징 중 하나 혹은 그 이상의 특징을 가집니다.

-   오랫동안에 걸쳐 새로운 기능을 추가해서 확장될 가능성이 있는 애플리케이션. 예를 들어, 온라인 스토어는 주문 상태를 추적하는 시스템으로 시작할 수 있습니다. 그런 후에, 제품이 판매될 때마다 제품의 재고량을 갱신하기 위해 재고 정보를 관리하는 시스템을 추가하여 확장할 수 있습니다. 또한, 제품 판매에 대한 재무적 통계치를 기록하는 회계 시스템이 필요할 수 있습니다. 소프트웨어 프로젝트가 앞으로 어떻게 발전해 나갈 것인지를 예측하는 것은 힘들지만, 위와 같은 형태로 발전되어 가는 애플리케이션이 분명히 많이 있을 것입니다.

-   쓰기(생성, 수정 그리고 삭제) 대비 조회의 비율이 높은 애플리케이션. 데이터의 쓰기 작업은 많이 이루어지지 않지만, 그에 비교해 조회 작업이 많이 이루어지는 애플리케이션들이 해당이 됩니다. 조회 대상이 되는 데이터를 포함한 데이터 저장소는 쓰기 명령에 필요한 데이터 저장소와는 다르기 때문이며, 쓰기에 필요한 데이터 저장소에 영향을 주지 않고 조회 데이터 저장소에 조회를 위한 최적화 작업을 수행할 수 있습니다. 이벤트가 발생할 때마다 데이터는 갱신되기므로, 중복된 데이터는 더는 문제가 되지 않습니다.

-   데이터를 다양한 형태로 제공하는 애플리케이션. 요즘에 많은 애플리케이션은 단순히 웹 페이지에 정보를 표시하는 데 그치지 않습니다. 예를 들어, 일부 애플리케이션은 사용자와 관련된 변경 사항을 사용자에게 알려주기 위해 월별로 사용자에게 이메일을 보냅니다. 검색 엔진이 또 다른 예가 될 수 있습니다. 검색 엔진은 같은 데이터를 사용할 수 있지만, 빠른 검색을 위해 최적화된 방법을 사용합니다. 보고서 도구들은 특정 기간에 걸친 데이터의 변화 추이를 보여주기 위해 정보들을 집계하여 보고서를 생성합니다. 이렇듯 같은 데이터를 사용하지만 다른 형태로 표시하는 애플리케이션들이 존재하게 됩니다. Axon을 사용하여, 각각의 데이터 저장소들을 실시간 혹은 계획에 맞춰서 독립적으로 갱신할 수 있습니다.

-   다른 목적을 가진 대상별로 분리된 컴포넌트를 가지는 애플리케이션. 온라인 스토어를 예로 들어 보면, 고객들은 제품을 주문하고 주문 상태를 주로 조회하는 반면, 직원들은 제품의 정보와 사용 가능한 재고량을 주로 갱신할 것입니다. Axon을 사용하면, 직원과 고객의 요구에 맞는 기능의 컴포넌트들을 각자의 분리된 서버로 배포할 수 있고 각기 다른 규모 가변 정책(scale policy)을 설정할 수 있습니다. 또한, 배포된 서버에 상관없이 각각의 컴포넌트가 원하는 이벤트가 발생하게 되면 Axon은 해당 이벤트를 전달하여 각 컴포넌트는 최신의 데이터를 유지할 수 있습니다.

-   기존의 애플리케이션과 다른 애플리케이션을 통합하는 것은 까다로운 작업입니다. 이럴 때에도 명령과 이벤트를 사용하여 엄격히 정의된 애플리케이션의 API가 있다면, 다른 외부 애플리케이션과의 통합을 보다 쉽게 할 수 있습니다. 어떤 애플리케이션이라도 명령을 보내고 기존의 애플리케이션에서 생성된 이벤트를 수신할 수 있기 때문입니다.

시작하기
===============

Axon framework으로 개발을 시작하기 위해선, Axon 라이브러리 파일들을 Axon 웹 사이트에서 직접 내려받거나 Maven, Gradle과 같은 빌드 시스템 설정을 통해 Axon 라이브러리 파일들을 받을 수 있습니다.

Axon 다운로드하기
-------------

[axonframework.org/download](http://www.axonframework.org/download/)을 통해 직접 Axon framework을 다운 받을 수 있습니다.

현재 버전별로 다운로드를 제공하고 있지만, 최신의 안정된 버전을 다운로드 합니다. 만약 가장 최신을 기능들을 사용해 보고 싶다면, 스냅샵 배포버전을 사용할 수 있습니다. Axon framework 파일과 Axon framework이 필요로 하는 라이브러리 그리고 소스와 문서들을 포함한 전체(full) 패키지를 다운로드 합니다.

현재 개발 진행 중인 Axon을 받고 싶다면, Axon framework의 Git 저장소를 복제(clone)하실 수 있습니다. 다음은 Axon framework의 Git 저장소 주소 입니다.

-   git://github.com/AxonFramework/AxonFramework.git
-   https://github.com/AxonFramework/AxonFramework

메이븐 설정하기
---------------

빌드 도구로 메이븐(Maven)을 사용하고 있다면, 아래와 같이 의존관계를 추가하여 Axon을 사용할 수 있습니다.

``` xml
<dependency>
    <groupId>org.axonframework</groupId>
    <artifactId>axon-core</artifactId>
    <version>${axon.version}</version>
</dependency>
```

Axon framework이 제공하는 대부분 기능은 선택 가능하며 추가적인 의존관계 (다른 라이브러리)가 필요 합니다. 불필요한 라이브러리로 인해 프로젝트가 복잡해지는 것을 방지하기 위해 추가적인 의존관계를 자동으로 추가하지 않도록 하였습니다.

필요한 인프라 스트럭쳐
---------------------------

Axon framework으로 개발하는데 특별히 요구되는 인프라는 없습니다. Java8을 대상으로 만들어지고 테스트하였기 때문에 Java8은 반드시 필요합니다.

Axon 자체적으로 외부 시스템(예, DBMS)에 대한 연결 혹은 스레드를 생성하지 않기 때문에, 보통의 애플리케이션 서버에서 Axon을 실행할 수 있습니다. Axon은 모든 비동기 관련 작업을 `Executor`를 사용하여 추상화하였습니다. 따라서 컨테이너에 의해서 관리되는 스레드 풀(Thread pool)을 쉽게 전달하여 사용할 수 있습니다. Tomcat, Jetty 혹은 오프라인으로도 동작 가능한 stand-alone 애플리케이션과 같은 애플리케이션 서버를 사용하지 않는다면, 스레드 풀을 생성하고 설정하기 위해 `Executors` 혹은 Spring framework을 사용할 수 있습니다.

도움이 필요할때
-----------------

애플리케이션을 개발하면서, 왜 발생했는지 모르는 문제에 부딪히거나 스스로 답을 찾기 어려운 궁금증이 생길 수 있습니다. Axon 사용자 메일링 리스트를 통해 도움을 받을 수 있습니다. [axonframework@googlegroups.com](mailto:axonframework@googlegroups.com)으로 메일을 보내면 다른 사용자들이나 Axon framework을 만들어 가는 분들이 문제 해결에 도움을 줄 수 있습니다.

Axon framework에 대한 버그를 발견하였다면, [github.com/AxonFramework/AxonFramework/issues](https://github.com/AxonFramework/AxonFramework/issues)으로 발견한 버그를 알려주세요. 그리고 버그를 알려줄 때, 발견한 버그에 대해 실제 결과 그리고 기대했던 결과와 함께 충분한 설명을 달아 줘야 합니다. 가능하다면, 버그가 발생하는 것을 확인할 수 있는 간단한 단위 테스트 코드를 함께 보내주세요. 위와 같이 해준다면 문제 해결에 많은 도움이 될 수 있습니다.

Axon Framework에 기여하기
==============================

Axon Framework는 현재 개발 중입니다. 규모 가변적이고 확장 가능한 애플리케이션을 더욱 쉽게 만들 수 있게 하도록 Axon Framework에 새로운 기능들을 추가할 것입니다. 그렇기 때문에 여러분의 도움을 기다리고 있습니다.

다음과 같은 방법을 통해 도움을 주실 수 있습니다.
-   [github.com/AxonFramework/AxonFramework/issues](https://github.com/AxonFramework/AxonFramework/issues)를 통해 발견한 버그 혹은 새로운 기능 요청 그리고 개선점 등을 보내 주세요. 어떤 내용이라도 보내 주면 됩니다. 단 버그를 발견하여 알려 주실 때는 최대한 자세한 내용을 알려 주셔야, 저희가 빨리 같은 버그를 재현하고 처리하는 데 많은 도움이 됩니다.
-   애플리케이션 개발 중, Axon framework에 도움이 될 것 같은 컴포넌트를 개발하셨다면, 저희에게 소스 파일을 포함한 패치 혹은 압축 파일을 보내 주세요. 보내 주신 코드 내용을 검토하여 Axon framework에 반영하도록 노력하겠습니다. 소스 코드를 보내 주실 땐, javadoc을 사용하여 코드에 대한 문서를 만들어 주세요. 저희가 소스 코드를 이해하는 데 많은 도움이 됩니다.
-   위의 방법이외에도 저희에게 도움이 될 다른 방법이 있다면 주저하지 마시고 [Axon Framework mailing list](mailto:axonframework@googlegroups.com)으로 메세지를 보내 주세요.

유료 지원받기
==================

Axon Framework는 오픈 소스이며 누구든지 사용 가능합니다. 단 특정 목적이나 문제가 발생하여 즉각적인 도움을 원하신다면, AxonIQ를 통해 유료 지원을 받을 수 있습니다. 해당 서비스는 Axon에 대해 상당한 경험과 지식을 가지고 있는 분들로 부터 교육, 자문 그리고 운영 지원을 받을 수 있습니다.

AxonIQ를에 대한 상세 내용을 원하시면, [axoniq.io](https://axoniq.io/) 혹은  [axoniq.io/services](https://axoniq.io/services)를 방문해 주세요.


라이선스 정보
===================

Axon Framework와 관련 문서들은 "**Apache License, Version 2.0.**"로 배포되고 있습니다. 라이선스에 대한 복사본은 [http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0)을 통해 확인할 수 있습니다.

관련법에 의해 요구되거나 서면으로 동의하지 않는 한, 라이선스에 따라 배포된 소프트웨어는 명시적 또는 묵시적으로 어떠한 종류의 보증이나 조건 없이 "있는 그대로"의 상태로 배포됩니다. 라이선스에 따른 사용 권한 및 제한 사항을 설명하는 특정 언어에 대한 [라이선스](http://www.apache.org/licenses/LICENSE-2.0)를 참조하십시오.
